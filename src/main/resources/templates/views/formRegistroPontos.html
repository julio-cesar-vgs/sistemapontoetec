<!DOCTYPE html>
<html lang="en"
	xmlns:th="http://thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
	<meta charset="UTF-8">
	<!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="/materialize/css/materialize.min.css"  media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<link rel="stylesheet" href="/style/stylecss.css"/>
	
		<script type = "text/javascript"
	   src = "https://code.jquery.com/jquery-2.1.1.min.js"></script>           
	<script src = "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
	<script
  		src="https://code.jquery.com/jquery-3.4.1.js"
  		integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  		crossorigin="anonymous">
	</script>
	<script>
         $(document).ready(function() {
            $('select').material_select();
         });
      </script>
      <script>
         $(document).ready(function() {
            $('checkbox').material_select();
         });
      </script>
	<script>
	  jQuery('document').ready(function(){
		    $table1=jQuery('#tbl_a');
		    $table1.find('thead tr').append('<th>Total</th>');
		    $table1.find('tbody tr').each(function(){
				var sum=0;
		      	var inicio = 	new Date(jQuery(this).find('td:nth-child(1)').text());
		      	//inicio.setSeconds(0,0);
		      	var pausa = 	new Date(jQuery(this).find('td:nth-child(2)').text());
		      	var retorno = 	new Date(jQuery(this).find('td:nth-child(3)').text());
		      	var termino = 	new Date(jQuery(this).find('td:nth-child(4)').text());
		      	sum = ((pausa-inicio)+(termino-retorno))/1000;
		      	//sum = ((Number(pausa.getTime())-Number(inicio.getTime()))// + (Number(retorno.getTime())-Number(termino.getTime())))
				var hora = (sum/(86400))*24;
		      	var minutos = (hora - Math.floor(hora))*60;
		      	var segundos = (minutos - Math.floor(minutos))*60
		      	//horasInteiras.toString().padStart(2,'0')
		      	hora = Math.floor(hora);			hora = hora.toString().padStart(2,'0');
		      	minutos = Math.floor(minutos);		minutos = minutos.toString().padStart(2,'0');
		      	segundos = Math.floor(segundos);	segundos = segundos.toString().padStart(2,'0');
		      	jQuery(this).append('<td>'+hora+":"+minutos+":"+segundos+'</td>');
		    });

		  });
	  

	</script>
    <title>Pontos</title>
   </head>

<body>

<body>
	<header>
		<nav>
			<div class="nav-wrapper #1b5e20 green darken-4">
				<a href="#!" class="brand-logo"><i class="material-icons" style="margin-left:50px">group_add</i>Registro Pontos</a>
				<ul class="right hide-on-med-and-down">
					<li><a href="/pessoas"><i class="material-icons" data-tooltip="Pessoas">format_list_bulleted</i></a></li>
	        		<li><a href="/cadastroPessoas"><i class="material-icons">group_add</i></a></li>
	        		<li><a href="/departamentofuncao"><i class="material-icons">group_work</i></a></li>
<<<<<<< HEAD
	        		<li><a href="/enviomensagens"><i class="material-icons">message</i></a></li>
=======
>>>>>>> 778d272039551a4a197aa08fde7c9faa65afe0d6
	      		</ul>
		    </div>
		</nav>	
	</header>
	<form method="post" class="container formGerais" th:each="registro: ${registro}">
		<div class="row">
			<div class="input-field col s1">
				Nome: <input type="number" th:value="${registro.codigo}" name="codigo" placeholder="Código" required/>
			</div>
			<div class="input-field col s5">
				Nome: <input type="text" th:value="${registro.nomecompleto}" name="nomecompleto" placeholder="Nome Completo" required/>
			</div>
			<div class="input-field col s3 minuscula">
				E-mail: <input type="text"  th:value="${registro.email}" name="email" placeholder="email@email.com" oninput="this.value = this.value.toLowerrCase()" required/>
			</div>
		</div>
		<div class="row">
			<div class="input-field col s6 minuscula">
				Departamento: <input type="text"  value="" name="departamento" placeholder="Departamento"/>
			</div>
			<div class="input-field col s6 minuscula">
				Função: <input type="text"  value="" name="email" id="função" placeholder="Função"	/>
			</div>
		</div>
		<button type="submit" class="waves-effect waves-light btn #212121 grey darken-4"><i class="material-icons left">add_box</i>Registrar Ponto</button>
	</form>
	
	<table class="container tabelaCadastros striped responsive-table" id="tbl_a">
		<thead>
			<tr>
				<th>Início Jornada</th>
				<th>Pausa</th>
				<th>Retorno</th>
				<th>Término Jornada</th>
				<th>Jornada Trabalho</th>
				<th>Deletar Ponto</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="pontos : ${pontos}">
<!-- 			<td id="inijornada" name="inijornada"><span th:text="${pontos.dtiniciojornada}"></span></td>
				<td id="inipausa" 	name="inipausa"><span th:text="${pontos.dtiniciopausa}"></span></td>
				<td id="terpausa" 	name="terpausa"><span th:text="${pontos.dtterminopausa}"></span></td>
				<td id="terjornada" name="terjornada"><span th:text="${pontos.dtterminojornada}"></span></td>
				<td class="jornada"><span th:text="${pontos.dtterminojornada}"></span></td>-->

				<td id="inijornada"><span th:text="${pontos.dtiniciojornada}"></span></td>
				<td id="inipausa"><span th:text="${pontos.dtiniciopausa}"></span></td>
				<td id="terpausa"><span th:text="${pontos.dtterminopausa}"></span></td>
				<td id="terjornada"><span th:text="${pontos.dtterminojornada}"></span></td>
				<td id="jor"></td>
				<td><a href="deletarponto" th:href="@{/deletarponto/(codigo=${pontos.id})}"><i class="material-icons">delete</i></a></td>				
			</tr>
		</tbody>
	</table>

</body>
   	<!--JavaScript at end of body for optimized loading-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="materialize/js/materialize.min.js"></script>
    
<footer class="page-footer nav-wrapper #1b5e20 green darken-4 rodape">
	<div class="footer-copyright">
		<div class="container">
			© 2020 Direitos Reservados
			<a class="grey-text text-lighten-4 right" href="#!"></a>
		</div>
	</div>
</footer>
</html>